<mvc:View
    controllerName="my.todo.todoapp.controller.Todo"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page id="todoPage" title="Todos" class="sapUiContentPadding">
        <content>
            <!-- Add todo form -->
            <VBox class="sapUiSmallMarginTop">
                <Input
                    placeholder="Title..."
                    value="{todo>/title}" />

                <Button
                    text="Add"
                    press=".onCreateTodo"
                    class="sapUiSmallMarginTop" />
            </VBox>
 
          <!-- Controls: Filter + Search + Sort -->
<HBox id="controlsRow" class="controlsRow sapUiSmallMarginTop " justifyContent="SpaceBetween">

  <!-- Left: Segmented filter (fixed size) -->
  <SegmentedButton id="segFilter" select=".onFilterChange" class="segmented-small">
    <layoutData>
      <FlexItemData growFactor="0" shrinkFactor="0" />
    </layoutData>
    <items>
      <SegmentedButtonItem key="all" text="All"/>
      <SegmentedButtonItem key="done" text="Done" />
      <SegmentedButtonItem key="pending" text="Pending"  class="minW"/>
    </items>
  </SegmentedButton>

  <!-- Middle: Search (flexible â€” takes leftover space) -->
  <HBox class="searchBox" alignItems="Center">
    <layoutData>
      <FlexItemData growFactor="1" shrinkFactor="1" />
    </layoutData>

    <Input
      id="inpSearch"
      placeholder="Search todos..."
      liveChange=".onSearchChange"
      value="{pagination>/search}"
      showValueStateMessage="false"
      width="100%" />
    <Button icon="sap-icon://decline" press=".onSearchClear" tooltip="Clear">
      <layoutData>
        <FlexItemData growFactor="0" shrinkFactor="0" />
      </layoutData>
    </Button>
  </HBox>

  <!-- Right: sort (fixed size) -->
  <HBox class="sortBox" alignItems="Center">
    <layoutData>
      <FlexItemData growFactor="0" shrinkFactor="0" />
    </layoutData>

    <Text text="Sort:" class="sapUiSmallMarginEnd" />
    <Select id="selSort" change=".onSortChange" selectedKey="{pagination>/sort}">
      <items>
        <core:Item key="createdAt desc" text="Newest first" />
        <core:Item key="createdAt asc" text="Oldest first" />
        <core:Item key="title asc" text="Title A-Z" />
        <core:Item key="title desc" text="Title Z-A" />
      </items>
    </Select>
  </HBox>

</HBox>
            <!-- Todo List -->
            <VBox class="sapUiSmallMarginTop">
                <List
                    id="todoList"
                    items="{todos>/value}"
                    noDataText="No todos yet"
                    mode="Delete"
                    delete=".onDeleteTodo"
                    class="sapUiSmallPaddingLeft ">
                    <CustomListItem class="sapUiSmallMarginBottom sapUiSmallMarginTop" >
                        <HBox
                            class="todoRow "
                            justifyContent="SpaceBetween"
                            alignItems="Center"
                            width="100%">
 
                            <customData>
                                <core:CustomData
                                    key="done"
                                    writeToDom="{= ${todos>isDone} }"
                                    value="" />
                            </customData>

                            <VBox>
                                <Text text="{todos>title}" />
                                <Text text="{= ${todos>isDone} ? 'Completed' : 'Pending' }" />
                            </VBox>

                            <Button icon="sap-icon://edit" press=".onEditTodo" />
                        </HBox>
                    </CustomListItem>
                </List>
            </VBox>

            <!-- Pagination button -->
            <HBox justifyContent="Center" class="sapUiSmallMarginTop">
                <Button text="Previous" press=".onPrevPage" />
                <Text text="Page {pagination>/page}" class="sapUiSmallMarginBegin sapUiSmallMarginEnd" />
                <Button text="Next" press=".onNextPage" />
            </HBox>

        </content>
    </Page>

</mvc:View>
