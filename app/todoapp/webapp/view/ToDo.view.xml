<mvc:View
  controllerName="my.todo.todoapp.controller.Todo"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">

  <Page
    id="todoPage"
    title="Todos"
    class="sapUiContentPadding">

    <content>

      <!-- Add todo form -->
      <VBox class="sapUiSmallMarginTop">
        <Input
          placeholder="Title..."
          value="{todo>/title}" />

        <Button
          text="Add"
          press=".onCreateTodo"
          class="sapUiSmallMarginTop" />
      </VBox>

      <!-- Controls: Filter + Search + Sort -->
      <HBox
        id="controlsRow"
        class="controlsRow sapUiSmallMarginTop"
        justifyContent="SpaceBetween">

        <!-- Filter -->
        <SegmentedButton
          id="segFilter"
          select=".onFilterChange"
          class="segmented-small">
          <items>
            <SegmentedButtonItem key="all" text="All" />
            <SegmentedButtonItem key="done" text="Done" />
            <SegmentedButtonItem key="pending" text="Pending" />
          </items>
        </SegmentedButton>

        <!-- Search -->
        <HBox alignItems="Center" width="40%">
          <Input
            id="inpSearch"
            placeholder="Search todos..."
            liveChange=".onSearchChange"
            width="100%" />
          <Button
            icon="sap-icon://decline"
            press=".onSearchClear"
            tooltip="Clear" />
        </HBox>

        <!-- Sort -->
        <HBox alignItems="Center">
          <Text text="Sort:" class="sapUiSmallMarginEnd" />
          <Select
            id="selSort"
            change=".onSortChange">
            <items>
              <core:Item key="createdAt desc" text="Newest first" />
              <core:Item key="createdAt asc" text="Oldest first" />
              <core:Item key="title asc" text="Title A–Z" />
              <core:Item key="title desc" text="Title Z–A" />
            </items>
          </Select>
        </HBox>

      </HBox>

      <!-- Todo List -->
      <VBox class="sapUiSmallMarginTop">

        <List
          id="todoList"
          items="{ path: '/Todos', templateShareable: false }"
          growing="true"
          growingThreshold="5"
          growingScrollToLoad="false"
          growingTriggerText="Load more"
          noDataText="No todos yet"
          mode="Delete"
          delete=".onDeleteTodo">

          <CustomListItem class="sapUiSmallMarginBottom sapUiSmallMarginTop">
            <HBox
              justifyContent="SpaceBetween"
              alignItems="Center"
              width="100%">

              <VBox>
                <Text text="{title}" />

                <!-- Status using ObjectStatus -->
            
                 <ObjectStatus
  text="{= ${isDone} === 'Yes' ? 'Completed' : 'Pending' }"
  state="{= ${isDone} === 'Yes' ? 'Success' : 'Error' }" />

              </VBox>

              <Button
                icon="sap-icon://edit"
                press=".onEditTodo" />

            </HBox>
          </CustomListItem>

        </List>

      </VBox>

    </content>

  </Page>
</mvc:View>
